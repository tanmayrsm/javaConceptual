ğŸ› ï¸ System Design Question: Trending Videos on YouTube ğŸ“¹ğŸ”¥

ğŸ§  Problem Statement:
Design a Trending Videos System ğŸŒŸ for YouTube that ranks videos based on real-time user engagement metrics (views ğŸ‘€, likes ğŸ‘, comments ğŸ’¬, shares ğŸ”—).
The system should process vast amounts of video telemetry data ğŸ“Š,
assign a percentile score ğŸ¯ to each video, and dynamically update the trending list ğŸ“ˆ.
Users should be able to see the most trending videos with low latency â±ï¸.

ğŸ’¡ Requirements:

ğŸ” Functional Requirements:

1. Telemetry Ingestion ğŸš€:
- Stream video view counts ğŸ“Š, likes â¤ï¸, shares ğŸ”„, and comments ğŸ’¬ in real time.
- Process and store metrics efficiently to calculate trending scores ğŸ“ˆ.
2. Video Ranking ğŸ†:
- Use a weighted ranking algorithm âš–ï¸ considering metrics like views, likes, shares, and watch duration â³ to rank videos.
- Assign a percentile score ğŸ¥‡ to each video, determining its trending position.
3. Trending List ğŸ“°:
- Provide users with an updated list of trending videos ğŸ“ƒ based on percentile scores.
- Implement efficient pagination ğŸ“œ for large datasets.
4. API Design ğŸŒ:
- Expose APIs to fetch trending videos ğŸ“², with options for filtering and sorting.
5. Admin Features ğŸ‘¨â€ğŸ’»:
- Admins can tweak ranking algorithm weights âš™ï¸.
- Admin dashboard for monitoring system health ğŸŒ¡ï¸, usage statistics ğŸ“Š, and ranking performance ğŸ“ˆ.

âš™ï¸ Non-Functional Requirements:

1. Scalability ğŸ“ˆ:
- Handle millions of concurrent users ğŸŒ and millions of video events ğŸ“¹.
- Ensure the system can scale horizontally â†”ï¸ to support increased video and telemetry data.
2. Availability â°:
- Ensure high availability (99.9% uptime) â˜ï¸, especially for the trending list API.
3. Low Latency â³:
- Ensure sub-200ms response times â²ï¸ for fetching trending videos.
4. Data Consistency âœ…:
- Implement eventual consistency ğŸ”„ between video telemetry updates and trending score calculations.
5. Security ğŸ”’:
- Secure APIs with authentication ğŸ”‘ and proper role-based access control.

ğŸŒ API Design:

Design the RESTful APIs for managing and fetching trending videos ğŸŒŸ. The APIs should support the following:

- Trending Videos API ğŸ“²: Fetch trending videos ğŸŒˆ, with filters for category ğŸ“‚, region ğŸŒ, etc.
- Video Ranking API ğŸ”: Expose video ranking and percentile score ğŸ“Š for specific videos.
- Admin API ğŸ‘¨â€ğŸ’»: Manage ranking algorithm parameters âš™ï¸ and monitor system health ğŸŒ¡ï¸.

ğŸ—ƒï¸ Database Design:

Design a schema to handle the following entities:

1. Videos ğŸ¥: Store video metadata (ID, title, channel, category, upload time).
2. Telemetry Data ğŸ“Š: Track real-time metrics (views, likes, comments, shares) for each video.
3. Ranking Scores ğŸ¥‡: Store the computed percentile score and rank for each video.
4. Admin Logs ğŸ“œ: Record changes made to ranking algorithm parameters for auditing purposes ğŸ”.

ğŸ” Use Case Queries:

Write SQL queries to solve the following:

1. Retrieve the top 10 trending videos ğŸ¥‡ in a specific category ğŸ“‚.
2. Fetch all videos by a specific uploader ğŸ‘¤ and their current trending scores ğŸ“Š.
3. Generate a report of video metrics (views ğŸ‘€, likes â¤ï¸, etc.) across a given time period ğŸ—“ï¸ for all trending videos.